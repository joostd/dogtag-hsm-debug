# check LDAP
ldapsearch -LLL -w Secret.123 -D "cn=Directory Manager" -H ldap://localhost
systemctl status dirsrv.target
systemctl enable dirsrv.target
systemctl start dirsrv.target

# check tomcat
systemctl status pki-tomcatd@pki-tomcat.service
systemctl enable pki-tomcatd@pki-tomcat.service
systemctl start pki-tomcatd@pki-tomcat.service

journalctl -xeu pki-tomcatd@pki-tomcat.service

#

certutil -d /etc/pki/pki-tomcat/alias -L
pki -d /etc/pki/pki-tomcat/alias nss-cert-show sslserver

certutil -d /root/.dogtag/pki-tomcat/ca/alias -L
pki -d /root/.dogtag/pki-tomcat/ca/alias nss-cert-show caadmin

pk12util -i /root/.dogtag/pki-tomcat/ca_admin_cert.p12 -d /root/.dogtag/nssdb -W Secret.123

###### OR

# https://github.com/dogtagpki/pki/blob/DOGTAG_10_6_BRANCH/docs/installation/Installing_CA.md
python3 -c 'import socket; print(socket.getfqdn())'
pki -c Secret.123 client-init
pki -c Secret.123 client-cert-import --pkcs12 ~/.dogtag/pki-tomcat/ca_admin_cert.p12 --pkcs12-password-file ~/.dogtag/pki-tomcat/ca/pkcs12_password.conf
certutil -L -d /root/.dogtag/nssdb/
pki -c Secret.123 -n caadmin ca-user-show caadmin

##### END

pki -U https://ubuntu-jammy:8443/ -d /root/.dogtag/nssdb -n caadmin ca-profile-find
pki -d /root/.dogtag/nssdb -n caadmin ca-profile-find

curl -k https://ubuntu-jammy:8443/ca/admin/ca/getStatus

pki -d /root/.dogtag/nssdb -n caadmin ca-cert-find
pki -d /root/.dogtag/nssdb -n caadmin ca-cert-find --name "CA Signing Certificate"
pki -d /root/.dogtag/nssdb -n caadmin ca-cert-find --name "ubuntu-jammy"

# show profile for Manual Certificate Manager Signing Certificate Enrollment

pki -d /root/.dogtag/nssdb -n caadmin ca-profile-show caCACert
